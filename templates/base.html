{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/style.css"> <!-- M·∫∑c ƒë·ªãnh -->
    {% block css %}
    {% endblock %}
    <link rel="icon" href="/static/img/icon.png">
    <!-- box icon -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>{% block title %}Django App{% endblock %}</title>
</head>
<!--Start of Tawk.to Script-->
<script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/683737529e6ff01910853492/1isbr06nd';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
</script>
<!--End of Tawk.to Script-->
<body>
    <header class="header">
        <!-- Logo -->
        <div class="logo">
            <img src="/static/img/icon.png" alt="img">
            <div class="slogan">
                <a href="/">
                    <h3>SUN ASIA</h3>
                    <p>Green House</p>
                </a>
            </div>
        </div>
        <!-- Navigation -->
        <nav class="nav">
            <a href="/" class="nav-main {% if request.path == '/' %}active{% endif %}">{% trans "Trang ch·ªß" %}</a>
            <div class="dropdown-nav-products">
                <a href="/products" class="nav-main {% if '/products' in request.path %}active{% endif %}">{% trans "C·ª≠a h√†ng" %}</a>
                <div class="dropdown-products">
                    <a href="/products?type=nhamang">{% trans "Nh√† m√†ng" %}</a>
                    <a href="/products?type=vattu">{% trans "V·∫≠t t∆∞" %}</a>
                    <a href="/products?type=tuoi">{% trans "H·ªá th·ªëng t∆∞·ªõi t·ª± ƒë·ªông" %}</a>
                    <a href="/products?type=cambien">{% trans "H·ªá th·ªëng c·∫£m bi·∫øn" %}</a>
                    <a href="/products?type=dieu-khien">{% trans "H·ªá th·ªëng ƒëi·ªÅu khi·ªÉn t·ª± ƒë·ªông" %}</a>
                </div>
            </div>
            <div class="dropdown-nav-projects">
                <a href="/projects" class="nav-main {% if '/projects' in request.path %}active{% endif %}">{% trans "D·ª± √°n" %}</a>
                <div class="dropdown-projects">
                    <a href="/projects?type=duoi5.000">{% trans "D∆∞·ªõi" %} 5.000 m¬≤</a>
                    <a href="/projects?type=10.000">5.000 m¬≤ - 10.000 m¬≤</a>
                    <a href="/projects?type=20.000">10.000 m¬≤ - 20.000 m¬≤</a>
                    <a href="/projects?type=tren20.000">{% trans "Tr√™n" %} 20.000 m¬≤</a>
                </div>
            </div>
            <a href="/news" class="nav-main {% if '/news' in request.path %}active{% endif %}">{% trans "Tin t·ª©c" %}</a>
            <a href="/contact" class="nav-main {% if '/contact' in request.path %}active{% endif %}">{% trans "Li√™n h·ªá" %}</a>
        </nav>
        <!-- Actions -->
        <div class="actions">
            <a href="#" class="download"><i class="fa-solid fa-download"></i> {% trans "T·∫£i ·ª©ng d·ª•ng" %}</a>
            <span class="icon" id="change-color"><i class="bx bx-sun"></i><i class="bx bx-moon"></i></span>
                {% if user %}
                    <span class="icon bell"><i class="fa-regular fa-bell"></i></span>
                    <div class="notification-box">
                        <div class="tab">
                            <a href="#" class="active">{% trans "T·∫•t c·∫£" %}</a>
                            <a href="#">{% trans "ƒê∆°n h√†ng" %}</a>
                            <a href="#">{% trans "Khuy·∫øn m√£i" %} <span class="badge">1</span></a>
                            <a href="#">{% trans "T√†i kho·∫£n" %}</a>
                            <a href="#">{% trans "Kh√°c" %}</a>
                        </div>
                        <div class="notification-body">
                            <div class="notification-content">
                                <div class="icon">üéüÔ∏è</div>
                                <div class="text">
                                    <div class="title">üëã Qu√† l√†m quen, chi√™u ƒë√£i voucher ƒëƒÉng tin b√°n üëã</div>
                                    <div class="description">
                                    ‚ú® T·∫∑ng b·∫°n 05 voucher Mi·ªÖn Ph√≠ Tin Th∆∞·ªùng b√°n nh√† ri√™ng, nh√† ph·ªë v√† ƒë·∫•t n·ªÅn d∆∞·ªõi 5 t·ª∑ ƒë√£ c√≥ t·∫°i ‚ÄúKhuy·∫øn m√£i‚Äù khi ƒëƒÉng tin
                                    </div>
                                    <div class="date">30/05/2025</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="user">
                        {% load user_filters %}
                        <div class="avatar">{{ user.username|last_name_initial }}</div>
                        <span class="username">{{ user.username }}</span>
                        <span class="dropdown"><i class="fa-solid fa-caret-down" id="dropdown-icon"></i></span>
                    </div>
                    <div class="dropdown-user">
                        <a href="{% url 'user-profile' slug=user.slug %}"><p><i class="fa-regular fa-user"></i> {% trans "Th√¥ng tin c√° nh√¢n" %}</p></a>
                        <a href="{% url 'cart' %}"><p><i class="fa-solid fa-cart-shopping"></i> {% trans "Qu·∫£n l√Ω gi·ªè h√†ng" %}</p></a>
                        <a href="#"><p><i class="fa-regular fa-heart"></i> {% trans "Danh m·ª•c y√™u th√≠ch" %}</p></a>
                        <a href="#"><p><i class="fa-regular fa-clock"></i> {% trans "L·ªãch s·ª≠ mua h√†ng" %}</p></a>
                        <hr>
                        <a href="/logout"><p><i class="fa-solid fa-arrow-right-from-bracket"></i> {% trans "ƒêƒÉng xu·∫•t" %}</p></a>
                    </div>
                {% else %}
                    <div class="login-register">
                        <a href="/accounts/">{% trans "ƒêƒÉng nh·∫≠p" %}</a>
                        <span>|</span>
                        <a href="/accounts/">{% trans "ƒêƒÉng k√Ω" %}</a>
                    </div>
                {% endif %}
            <div class="language-selector">
                <button class="btn-post lang-toggle">
                    {% get_current_language as LANGUAGE_CODE %}
                    {% if LANGUAGE_CODE == "vi" %}
                        <img src="https://cdn.pgimgs.com/hive-ui/static/v0.1.3/flags/vietnam.svg" alt="">
                        <span class="lang-name">Vi·ªát Nam</span>
                    {% elif LANGUAGE_CODE == "en" %}
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_the_United_Kingdom_%283-5%29.svg/1280px-Flag_of_the_United_Kingdom_%283-5%29.svg.png" alt="">
                        <span class="lang-name">English</span>
                    {% elif LANGUAGE_CODE == "ja" %}
                        <img src="https://cdn.pixabay.com/photo/2013/07/13/14/15/japan-162328_1280.png" alt="">
                        <span class="lang-name">Êó•Êú¨Ë™û</span>
                    {% endif %}
                    <i class="fa-solid fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown">
                    <a href="#" class="lang-option" data-lang="vi">
                        <img src="https://cdn.pgimgs.com/hive-ui/static/v0.1.3/flags/vietnam.svg" alt=""> {% trans "Vi·ªát Nam" %}
                    </a>
                    <a href="#" class="lang-option" data-lang="en">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_the_United_Kingdom_%283-5%29.svg/1280px-Flag_of_the_United_Kingdom_%283-5%29.svg.png" alt=""> {% trans "Anh" %}
                    </a>
                    <a href="#" class="lang-option" data-lang="ja">
                        <img src="https://cdn.pixabay.com/photo/2013/07/13/14/15/japan-162328_1280.png" alt=""> {% trans "Nh·∫≠t B·∫£n" %}
                    </a>
                </div>
                <form id="language-form" method="post" action="{% url 'set_language' %}" style="display: none;">
                    {% csrf_token %}
                    <input type="hidden" name="language" id="language-input">
                    <input type="hidden" name="next" value="{{ request.path }}">
                </form>
            </div>  
            <p class="menu"><a href="#"><i class="fa-solid fa-bars" id="menu-icon"></i></a></p>
            <div class="menu-nav">
                <a href="/"><i class="fa-solid fa-house"></i> {% trans "Trang ch·ªß" %}</a>
                <a href="/products"><i class="fa-solid fa-shop"></i> {% trans "C·ª≠a h√†ng" %}</a>
                <a href="/projects"><i class="fa-solid fa-city"></i> {% trans "D·ª± √°n" %}</a>
                <a href="/news"><i class="fa-solid fa-newspaper"></i> {% trans "Tin t·ª©c" %}</a>
                <a href="/contact"><i class="fa-solid fa-paper-plane"></i> {% trans "Li√™n h·ªá" %}</a>
            </div>
        </div>
    </header>
    <!-- Floating Icons -->
    <div class="floating-icons">
        <a href="https://zalo.me/0981358442" target="_blank" class="icon zalo" title="Zalo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg" alt="Zalo" />
        </a>
        <a href="tel:0981358442" class="icon phone" title="G·ªçi ngay">
            <img src="https://cdn-icons-png.flaticon.com/512/724/724664.png" alt="Phone" />
        </a>
    </div>
    {% block content %} {% endblock %}
    <footer>
        <div class="part1">
            <div class="part1-item">
                <img src="/static/img/icon.png" alt="img">
                <div class="slogan">
                    <h3>SUN ASIA</h3>
                    <p>Green House</p>
                </div>
            </div>
            <div class="part1-item">
                <a href="tel:0982473136" title="G·ªçi ngay">
                    <i class="fa-solid fa-phone"></i>
                    <div class="footer-inf">
                        <p>{% trans "S·ªë ƒëi·ªán tho·∫°i" %}</p>
                        <h3>0982.473.136</h3>
                    </div>
                </a>
            </div>
            <div class="part1-item">
                <a href="mailto:xuannincntt@gmail.com?subject=Y√™u c·∫ßu h·ªó tr·ª£&body=Xin ch√†o, t√¥i c·∫ßn gi√∫p ƒë·ª° v·ªÅ..." title="email">
                    <i class="fa-solid fa-envelope-open-text"></i>
                    <div class="footer-inf">
                        <p>{% trans "H·ªó tr·ª£ kh√°ch h√†ng" %}</p>
                        <h3>xuannincntt@gmail.com</h3>
                    </div>
                </a>
            </div>
        </div>
        <div class="part2">
            <div class="part2-item">
                <h4>{% trans "C√îNG TY C·ªî PH·∫¶N ƒê·∫¶U T∆Ø V√Ä PH√ÅT TRI·ªÇN SUN ASIA" %}</h4>
                <div class="social">
                    <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="#"><i class="fa-brands fa-google"></i></a>
                </div>
                <p>
                    <a href="https://maps.app.goo.gl/TSBmSckpeJUx3w1G7" target="_blank" title="ƒê·ªãa ch·ªâ">
                        <i class="fa-solid fa-location-dot"></i> S·ªë nh√† 24/94 ng√µ H√†m R·ªìng, ph·ªë Ng·ªçc L√¢m, Qu·∫≠n Long Bi√™n, H√† N·ªôi
                    </a>
                </p>
                <h5>{% trans "ƒêƒÇNG K√ù NH·∫¨N TIN" %}</h5>
                <form class="subscribe-form">
                    <input type="email" placeholder="{% trans 'Nh·∫≠p email c·ªßa b·∫°n' %}" required>
                    <button type="submit">
                        <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </form>
            </div>
            <div class="part2-item">
                <h4>{% trans "H∆Ø·ªöNG D·∫™N" %}</h4>
                <p><a href="#">{% trans "V·ªÅ ch√∫ng t√¥i" %}</a></p>
                <p><a href="#">{% trans "B√°o gi√° v√† h·ªó tr·ª£" %}</a></p>
                <p><a href="#">{% trans "C√¢u h·ªèi th∆∞·ªùng g·∫∑p" %}</a></p>
                <p><a href="#">{% trans "G√≥p √Ω b√°o l·ªói" %}</a></p>
                <p><a href="#">Sitemap</a></p>
            </div>
            <div class="part2-item">
                <h4>{% trans "QUY ƒê·ªäNH" %}</h4>
                <p><a href="#">{% trans "Quy ƒë·ªãnh mua h√†ng" %}</a></p>
                <p><a href="#">{% trans "Quy ch·∫ø ho·∫°t ƒë·ªông" %}</a></p>
                <p><a href="#">{% trans "ƒêi·ªÅu kho·∫£n th·ªèa thu·∫≠n" %}</a></p>
                <p><a href="#">{% trans "Ch√≠nh s√°ch b·∫£o m·∫≠t" %}</a></p>
                <p><a href="#">{% trans "Gi·∫£i quy·∫øt khi·∫øu n·∫°i" %}</a></p>
            </div>
        </div>
        <hr>
        <div class="part3">
            <h3>Copyright ¬© 2025 - by Vu Xuan Nin</h3>
        </div>
    </footer>
    {% block script %} {% endblock %}
    <script>
        const dropdownBtn = document.querySelector('.user');
        const dropdownUser = document.querySelector('.dropdown-user');
        const dropdownIcon = document.getElementById('dropdown-icon');
        const dropdownBell = document.querySelector('.bell');
        const notificationBox = document.querySelector('.notification-box');

        // Ki·ªÉm tra t·ªìn t·∫°i tr∆∞·ªõc khi thao t√°c
        if (dropdownBtn && dropdownUser && dropdownIcon) {
            // Toggle dropdown-user + icon
            dropdownBtn.addEventListener('click', function () {
                dropdownUser.classList.toggle('show');
                if (dropdownUser.classList.contains('show')) {
                    dropdownIcon.classList.remove('fa-caret-down');
                    dropdownIcon.classList.add('fa-caret-up');
                } else {
                    dropdownIcon.classList.remove('fa-caret-up');
                    dropdownIcon.classList.add('fa-caret-down');
                }
            });

            // Click ra ngo√†i th√¨ ƒë√≥ng dropdown-user
            document.addEventListener('click', function (e) {
                if (!dropdownBtn.contains(e.target) && !dropdownUser.contains(e.target)) {
                    dropdownUser.classList.remove('show');
                    dropdownIcon.classList.remove('fa-caret-up');
                    dropdownIcon.classList.add('fa-caret-down');
                }
            });
        }

        if (dropdownBell) {
            dropdownBell.addEventListener('click', function () {
                notificationBox.classList.toggle('show');
            });

            document.addEventListener('click', function (e) {
                if (!dropdownBell.contains(e.target)) {
                    notificationBox.classList.remove('show');
                }
            }); 
        }

        if (localStorage.getItem("darkMode") === "enabled") {
            document.body.classList.toggle("darkMode");
        }

        document.addEventListener("DOMContentLoaded", function () {
            const toggleBtn = document.querySelector(".lang-toggle");
            const selector = document.querySelector(".language-selector");
            let darkMode = localStorage.getItem("darkMode");
            const changeColorBtn = document.getElementById("change-color");

            changeColorBtn.addEventListener("click", function () {
                document.body.classList.toggle("darkMode");
                if (document.body.classList.contains("darkMode")) {
                    localStorage.setItem("darkMode", "enabled");
                } else {
                    localStorage.setItem("darkMode", "disabled");
                }
            });

            if (toggleBtn && selector) {
                toggleBtn.addEventListener("click", function (e) {
                    e.stopPropagation();
                    selector.classList.toggle("show");
                });

                document.querySelectorAll('.lang-option').forEach(option => {
                    option.addEventListener('click', function (e) {
                        e.preventDefault();
                        const lang = this.getAttribute('data-lang');
                        document.getElementById('language-input').value = lang;
                        document.getElementById('language-form').submit();
                    });
                });

                document.addEventListener("click", function () {
                    selector.classList.remove("show");
                });
            }
        });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/ae2b5a8ae3.js" crossorigin="anonymous"></script>
</body>
</html>